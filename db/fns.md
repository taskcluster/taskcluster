# Stored Functions

<!-- AUTOGENERATED DO NOT EDIT -->
## auth

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| clients_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| clients_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| clients_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| clients_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| clients_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| get_roles | read |  | table (role_id text, scopes jsonb, created timestamptz, description text, last_modified timestamptz, etag uuid) | Get the full set of roles.  Each result row has an etag, but all such<br />etags will be the same, representing the etag for the most recent<br />modification of the table.  Results are sorted by role_id. |
| modify_roles | write | roles_in jsonb, old_etag_in uuid | void | Replace the current set of roles entirely with the given set of roles, if the current etag matches the existing etag. <br />The role objects are specified with underscore spelling (`role_id`).<br />If the etag has changed, this returns P0004 signalling that the caller should fetch a fresh set of roles and try again.<br />If there are no existing roles, then the old etag is not used. |
| roles_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| roles_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| roles_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| roles_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| roles_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
## github

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| create_github_build | write | organization_in text, repository_in text, sha_in text, task_group_id_in text, state_in text, created_in timestamptz, updated_in timestamptz, installation_id_in integer, event_type_in text, event_id_in text | void | Create a new github build.  Raises UNIQUE_VIOLATION if the pool already exists. |
| delete_github_build | write | task_group_id_in text | void | Delete a github build. |
| get_github_build | read | task_group_id_in text | table (organization text, repository text, sha text, task_group_id text, state text, created timestamptz, updated timestamptz, installation_id integer, event_type text, event_id text, etag uuid) | Get a github build. The returned table will have one or zero rows. |
| get_github_builds | read | page_size_in integer, page_offset_in integer, organization_in text, repository_in text, sha_in text | table (organization text, repository text, sha text, task_group_id text, state text, created timestamptz, updated timestamptz, installation_id integer, event_type text, event_id text, etag uuid) | Get github builds.  |
| set_github_build_state | write | task_group_id_in text, state_in text | void | Only update the state of a build and update the `updated` timestamp |
| taskcluster_check_runs_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| taskcluster_check_runs_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_check_runs_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_check_runs_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_check_runs_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_checks_to_tasks_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| taskcluster_checks_to_tasks_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_checks_to_tasks_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_checks_to_tasks_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_checks_to_tasks_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_github_builds_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| taskcluster_github_builds_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_github_builds_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_github_builds_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_github_builds_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_integration_owners_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| taskcluster_integration_owners_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| taskcluster_integration_owners_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_integration_owners_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| taskcluster_integration_owners_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
## hooks

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| create_hooks_queue | write | hook_group_id_in text, hook_id_in text, queue_name_in text, bindings_in jsonb | uuid | Create a new hooks queue.  Raises UNIQUE_VIOLATION if the hook already exists. |
| create_last_fire | write | hook_group_id_in text, hook_id_in text, fired_by_in text, task_id_in text, task_create_time_in timestamptz, result_in text, error_in text | uuid | Create a new hook last fire.  Raises UNIQUE_VIOLATION if the hook already exists. |
| delete_hooks_queue | write | hook_group_id_in text, hook_id_in text | void | Delete a hooks queue. |
| delete_last_fires | write | hook_group_id_in text, hook_id_in text | void | Delete last fires that match a given `hook_group_id` and `hook_id`. |
| expire_last_fires | write |  | integer | Expire last fires that are older than a year.<br />Returns a count of rows that have been deleted. |
| get_hooks_queues | read | page_size_in integer, page_offset_in integer | table(hook_group_id text, hook_id text, queue_name text, bindings jsonb, etag uuid) | Get hooks queues ordered by `hook_group_id` and `hook_id`.<br />If the pagination arguments are both NULL, all rows are returned.<br />Otherwise, page_size rows are returned at offset page_offset. |
| get_last_fire | read | hook_group_id_in text, hook_id_in text, task_id_in text | table(hook_group_id text, hook_id text, fired_by text, task_id text, task_create_time timestamptz, result text, error text, etag uuid) | Get a hook last fire. |
| get_last_fires | read | hook_group_id_in text, hook_id_in text, page_size_in integer, page_offset_in integer | table(hook_group_id text, hook_id text, fired_by text, task_id text, task_create_time timestamptz, result text, error text, etag uuid) | Get hooks last fires filtered by the `hook_group_id` and `hook_id` arguments,<br />ordered by `hook_group_id`, `hook_id`, and  `worker_id`.<br />If the pagination arguments are both NULL, all rows are returned.<br />Otherwise, page_size rows are returned at offset page_offset. |
| hooks_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| hooks_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| hooks_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| hooks_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| hooks_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| last_fire_3_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| last_fire_3_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| last_fire_3_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| last_fire_3_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| last_fire_3_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queues_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queues_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queues_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queues_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queues_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| update_hooks_queue_bindings | write | hook_group_id_in text, hook_id_in text, bindings_in jsonb | table(hook_group_id text, hook_id text, queue_name text, bindings jsonb, etag uuid) | Update bindings of a hooks queue. If no such queue exists,<br />the return value is an empty set. |
## index

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| indexed_tasks_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| indexed_tasks_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| indexed_tasks_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| indexed_tasks_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| indexed_tasks_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| namespaces_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| namespaces_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| namespaces_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| namespaces_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| namespaces_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
## notify

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| add_denylist_address | write | notification_type_in text, notification_address_in text | void | If the denylist address already exists, this is a no-op. Otherwise, add the denylist<br />address for the taskcluster-notify service, with a new random etag. |
| all_denylist_addresses | read | page_size_in integer, page_offset_in integer | table (notification_type text, notification_address text) | List all denylist addresses for the taskcluster-notify service. |
| delete_denylist_address | write | notification_type_in text, notification_address_in text | integer | Delete a denylist address for the taskcluster-notify service.<br />Returns number of rows deleted (0 or 1). |
| denylisted_notification_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| denylisted_notification_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| denylisted_notification_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| denylisted_notification_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| denylisted_notification_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| exists_denylist_address | read | notification_type_in text, notification_address_in text | boolean | Returns a boolean indicating whether the denylist type/address exists. |
| update_widgets | write | name_in text | table (name text) | Temporary method to test infrastructure support fo database access |
## purge_cache

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| all_purge_requests | read | page_size_in integer, page_offset_in integer | table (provisioner_id text, worker_type text, cache_name text, before timestamptz) | View all active purge requests. |
| cache_purges_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| cache_purges_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| cache_purges_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| cache_purges_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| cache_purges_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| expire_cache_purges | write | expires_in timestamptz | integer | Expire cache purges that come before `expires_in`.<br />Returns a count of rows that have been deleted. |
| purge_cache | write | provisioner_id_in text, worker_type_in text, cache_name_in text, before_in timestamptz, expires_in timestamptz | void | Publish a request to purge caches with name `cache_name_in`<br />on `provisioner_id_in`/`worker_type_in` workers. |
| purge_requests | read | provisioner_id_in text, worker_type_in text | table (provisioner_id text, worker_type text, cache_name text, before timestamptz) | List the caches for this `provisioner_id_in`/`worker_type_in`. |
## queue

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| azure_queue_count | read | queue_name text | integer | Count non-expired messages in the named queue.<br /> |
| azure_queue_delete | write | queue_name text, message_id uuid, pop_receipt uuid | void | Delete the message identified by the given `queue_name`, `message_id` and<br />`pop_receipt`.<br /> |
| azure_queue_delete_expired | write |  | void | Delete all expired messages.  This is a maintenance task that should occur<br />about once an hour.<br /> |
| azure_queue_get | write | queue_name text, visible timestamp, count integer | table (message_id uuid, message_text text, pop_receipt uuid) | Get up to `count` messages from the given queue, setting the `visible`<br />column of each to the given value.  Returns a `message_id` and<br />`pop_receipt` for each one, for use with `azure_queue_delete` and<br />`azure_queue_update`.<br /> |
| azure_queue_put | write | queue_name text, message_text text, visible timestamp, expires timestamp | void | Put the given message into the given queue.  The message will not be visible until<br />after the visible timestamp, and will disappear after the expires timestamp.<br /> |
| azure_queue_update | write | queue_name text, message_text text, message_id uuid, pop_receipt uuid, visible timestamp | void | Update the message identified by the given `queue_name`, `message_id` and<br />`pop_receipt`, setting its `visible` and `message_text` properties as<br />given.<br /> |
| create_queue_artifact | write | task_id_in text, run_id_in integer, name_in text, storage_type_in text, content_type_in text, details_in jsonb, present_in boolean, expires_in timestamptz | table(task_id text, run_id integer, name text, storage_type text, content_type text, details jsonb, present boolean, expires timestamptz) | Create a new artifact. Raises UNIQUE_VIOLATION if the artifact already exists.<br />Returns the newly created artifact. |
| delete_queue_artifact | write | task_id_in text, run_id_in integer, name_in text | void | Delete a queue artifact. |
| get_queue_artifact | read | task_id_in text, run_id_in integer, name_in text | table(task_id text, run_id integer, name text, storage_type text, content_type text, details jsonb, present boolean, expires timestamptz) | Get a queue artifact. The returned table will have one or zero row. |
| get_queue_artifacts | read | task_id_in text, run_id_in integer, expires_in timestamptz, page_size_in integer, page_offset_in integer | table(task_id text, run_id integer, name text, storage_type text, content_type text, details jsonb, present boolean, expires timestamptz) | Get existing queue artifacts filtered by the optional arguments,<br />ordered by the `task_id`, `run_id`, and `name`.<br />If the pagination arguments are both NULL, all rows are returned.<br />Otherwise, page_size rows are returned at offset page_offset. |
| queue_artifacts_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_artifacts_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_artifacts_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_artifacts_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_artifacts_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_provisioner_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_provisioner_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_provisioner_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_provisioner_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_provisioner_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_dependency_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_task_dependency_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_dependency_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_dependency_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_dependency_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_group_active_sets_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_task_group_active_sets_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_group_active_sets_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_group_active_sets_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_group_active_sets_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_group_members_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_task_group_members_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_group_members_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_group_members_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_group_members_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_groups_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_task_groups_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_groups_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_groups_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_groups_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_requirement_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_task_requirement_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_task_requirement_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_requirement_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_task_requirement_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_tasks_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_tasks_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_tasks_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_tasks_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_tasks_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_worker_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_worker_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_worker_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_worker_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_worker_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_worker_type_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| queue_worker_type_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| queue_worker_type_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| queue_worker_type_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| queue_worker_type_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| update_queue_artifact | write | task_id_in text, run_id_in integer, name_in text, details_in jsonb, expires_in timestamptz | table(task_id text, run_id integer, name text, storage_type text, content_type text, details jsonb, present boolean, expires timestamptz) | Update a queue artifact.<br />Returns the up-to-date artifact row that have the same task id, run id, and name. |
## secrets

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| secrets_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| secrets_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| secrets_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| secrets_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| secrets_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
## web_server

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| access_token_table_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| access_token_table_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| access_token_table_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| access_token_table_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| access_token_table_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| authorization_codes_table_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| authorization_codes_table_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| authorization_codes_table_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| authorization_codes_table_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| authorization_codes_table_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| github_access_token_table_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| github_access_token_table_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| github_access_token_table_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| github_access_token_table_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| github_access_token_table_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| session_storage_table_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| session_storage_table_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| session_storage_table_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| session_storage_table_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| session_storage_table_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
## worker_manager

| Name | Mode | Arguments | Returns | Description |
| --- | --- | --- | --- | --- |
| create_worker | write | worker_pool_id_in text, worker_group_in text, worker_id_in text, provider_id_in text, created_in timestamptz, expires_in timestamptz, state_in text, provider_data_in jsonb, capacity_in integer, last_modified_in timestamptz, last_checked_in timestamptz | uuid | Create a new worker. Raises UNIQUE_VIOLATION if the worker already exists.<br />Returns the etag of the newly created worker. |
| create_worker_pool | write | worker_pool_id_in text, provider_id_in text, previous_provider_ids_in jsonb, description_in text, config_in jsonb, created_in timestamptz, last_modified_in timestamptz, owner_in text, email_on_error_in boolean, provider_data_in jsonb | void | Create a new worker pool.  Raises UNIQUE_VIOLATION if the pool already exists. |
| delete_worker | write | worker_pool_id_in text, worker_group_in text, worker_id_in text | void | Delete a worker. |
| delete_worker_pool | write | worker_pool_id_in text | void | Delete a worker pool immediately. |
| expire_worker_pools | write |  | table(worker_pool_id text) | Expire worker pools, deleting those which have provider-id null-provider and<br />no previous_provider_ids.  Returns the worker pool ids that it deletes. |
| expire_workers | write | expires_in timestamptz | integer | Expire workers that come before `expires_in`.<br />Returns a count of rows that have been deleted. |
| get_worker | read | worker_pool_id_in text, worker_group_in text, worker_id_in text | table(worker_pool_id text, worker_group text, worker_id text, provider_id text, created timestamptz, expires timestamptz, state text, provider_data jsonb, capacity integer, last_modified timestamptz, last_checked timestamptz, etag uuid) | Get an existing worker. The returned table will have one or (if no such worker is defined) zero rows. |
| get_worker_2 | read | worker_pool_id_in text, worker_group_in text, worker_id_in text | table(worker_pool_id text, worker_group text, worker_id text, provider_id text, created timestamptz, expires timestamptz, state text, provider_data jsonb, capacity integer, last_modified timestamptz, last_checked timestamptz, secret jsonb, etag uuid) | Get an existing worker. The returned table will have one or (if no such worker is defined) zero rows. |
| get_worker_pool_with_capacity | read | worker_pool_id_in text | table(worker_pool_id text, provider_id text, previous_provider_ids jsonb, description text, config jsonb, created timestamptz, last_modified timestamptz, owner text, email_on_error boolean, provider_data jsonb, current_capacity integer) | Get an existing worker pool.  The returned table will have one or (if no such worker pool is defined) zero rows. |
| get_worker_pools_with_capacity | read | page_size_in integer, page_offset_in integer | table(worker_pool_id text, provider_id text, previous_provider_ids jsonb, description text, config jsonb, created timestamptz, last_modified timestamptz, owner text, email_on_error boolean, provider_data jsonb, current_capacity integer) | Get existing worker pools, ordered by `worker_pool_id`.  If the pagination arguments are both NULL, all rows are returned.<br />Otherwise, page_size rows are returned at offset page_offset. |
| get_workers | read | worker_pool_id_in text, worker_group_in text, worker_id_in text, state_in text, page_size_in integer, page_offset_in integer | table(worker_pool_id text, worker_group text, worker_id text, provider_id text, created timestamptz, expires timestamptz, state text, provider_data jsonb, capacity integer, last_modified timestamptz, last_checked timestamptz) | Get existing workers filtered by the optional arguments,<br />ordered by `worker_pool_id`, `worker_group`, and  `worker_id`.<br />If the pagination arguments are both NULL, all rows are returned.<br />Otherwise, page_size rows are returned at offset page_offset. |
| remove_worker_pool_previous_provider_id | write | worker_pool_id_in text, provider_id_in text | void | Remove the given provider_id from the worker pool's previous_provider_ids.  It is<br />not an error if the worker pool does not exist, or if the provider_id is not in the<br />previous_provider_ids set. |
| update_worker | write | worker_pool_id_in text, worker_group_in text, worker_id_in text, provider_id_in text, created_in timestamptz, expires_in timestamptz, state_in text, provider_data_in jsonb, capacity_in integer, last_modified_in timestamptz, last_checked_in timestamptz, etag_in uuid | table(worker_pool_id text, worker_group text, worker_id text, provider_id text, created timestamptz, expires timestamptz, state text, provider_data jsonb, capacity integer, last_modified timestamptz, last_checked timestamptz, etag uuid) | Update a worker.<br />Returns the up-to-date worker row that have the same worker_pool_id, worker_group, and worker_id.<br />If the etag argument is empty then the update will overwrite the matched row.<br />Else, the function will fail if the etag is out of date. This is useful for concurency handling. |
| update_worker_2 | write | worker_pool_id_in text, worker_group_in text, worker_id_in text, provider_id_in text, created_in timestamptz, expires_in timestamptz, state_in text, provider_data_in jsonb, capacity_in integer, last_modified_in timestamptz, last_checked_in timestamptz, etag_in uuid, secret_in jsonb | table(worker_pool_id text, worker_group text, worker_id text, provider_id text, created timestamptz, expires timestamptz, state text, provider_data jsonb, capacity integer, last_modified timestamptz, last_checked timestamptz, etag uuid, secret jsonb) | Update a worker.<br />Returns the up-to-date worker row that have the same worker_pool_id, worker_group, and worker_id.<br />If the etag argument is empty then the update will overwrite the matched row.<br />Else, the function will fail if the etag is out of date. This is useful for concurency handling. |
| update_worker_pool_provider_data | write | worker_pool_id_in text, provider_id_in text, provider_data_in jsonb | void | Update the provider_data for the given provider_id in this worker pool.  Note that<br />this sets the provider_data property unconditionally, and it is up to the service<br />to ensure that concurrent modifications do not occur.  It is not an error if the<br />worker pool does not exist. |
| update_worker_pool_with_capacity | write | worker_pool_id_in text, provider_id_in text, description_in text, config_in jsonb, last_modified_in timestamptz, owner_in text, email_on_error_in boolean | table(worker_pool_id text, provider_id text, description text, config jsonb, created timestamptz, last_modified timestamptz, owner text, email_on_error boolean, previous_provider_id text, current_capacity integer) | Update API-accessible columns on an existig worker pool.  All fields are<br />overridden, but if the provider_id changes, then the existing provider_id<br />is added to previous_provider_ids.  The return value contains values<br />required for an API response and previous_provider_id (singular) containing<br />the provider_id found before the update.  If no such worker pool exists,<br />the return value is an empty set. |
| wmworker_pool_errors_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| wmworker_pool_errors_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| wmworker_pool_errors_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| wmworker_pool_errors_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| wmworker_pool_errors_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| wmworker_pools_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| wmworker_pools_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| wmworker_pools_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| wmworker_pools_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| wmworker_pools_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| wmworkers_entities_create | write | pk text, rk text, properties jsonb, overwrite boolean, version integer | uuid | See taskcluster-lib-entities |
| wmworkers_entities_load | read | partition_key text, row_key text | table (partition_key_out text, row_key_out text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
| wmworkers_entities_modify | write | partition_key text, row_key text, properties jsonb, version integer, old_etag uuid | table (etag uuid) | See taskcluster-lib-entities |
| wmworkers_entities_remove | write | partition_key text, row_key text | table (etag uuid) | See taskcluster-lib-entities |
| wmworkers_entities_scan | read | pk text, rk text, condition text, size integer, page integer | table (partition_key text, row_key text, value jsonb, version integer, etag uuid) | See taskcluster-lib-entities |
<!-- AUTOGENERATED DO NOT EDIT - END -->
