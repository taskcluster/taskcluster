$schema: "/schemas/common/metaschema.json#"
title: Azure Sequential Deployment Resources
description: |
  Schema for Azure resources used in traditional sequential (resource-by-resource) deployment.
  This includes VM configuration, storage, networking, and OS profile settings.
  Note: workerManager and workerConfig are defined in the parent schema.
type: object
required:
  - location
  - subnetId
  - hardwareProfile
  - storageProfile
additionalProperties: true
properties:
  ignoreFailedProvisioningStates:
    title: "Ignore failed provisioningStates"
    type: array
    uniqueItems: true
    items:
      type: string
    description: Deprecated - please use `workerManager.ignoreFailedProvisioningStates` instead
  location:
    title: Location
    type: string
    description: The Azure location this worker should be spawned in
  subnetId:
    title: Subnet ID
    type: string
    description: The ID of the subnet workers should be spawned in
  priority:
    title: Priority
    type: string
    description: |
      virtual machine priority, i.e. Spot
      https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#virtualmachineprioritytypes
  billingProfile:
    title: Billing Profile
    type: object
    description: https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#billingprofile
    additionalProperties: true
    required: []
    properties:
      maxPrice:
        title: Max Price
        type: number
        description: the maximum price to pay for a spot virtual machine in US Dollars
  hardwareProfile:
    title: Hardware Profile
    type: object
    description: https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#hardwareprofile
    additionalProperties: true
    required:
      - vmSize
    properties:
      vmSize:
        title: Virtual machine type
        type: string
  osProfile:
    title: OS Profile
    type: object
    description: |
      adminPassword, computerName, and customData are set by the provider and are not configurable
      https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#osprofile
    additionalProperties: true
    required: []
  storageProfile:
    title: Storage Profile
    type: object
    additionalProperties: true
    required:
      - osDisk
    properties:
      osDisk:
        title: OS Disk
        type: object
        description: |
          See https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#osdisk.
          Note that naming disks is not supported; any provided name will be overwritten with a
          dynamically generated name.
        additionalProperties: true
        required: []
        properties:
          createOption:
            type: string
            description: |
              FromImage creates the disk from the specified image
              https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#diskcreateoptiontypes
      dataDisks:
        title: Data Disks
        type: array
        uniqueItems: false
        items:
          title: Data Disk
          type: object
          description: |
            See https://docs.microsoft.com/en-us/javascript/api/@azure/arm-compute/datadisk.
            Note that naming disks is not supported; any provided name will be overwritten with a
            dynamically generated name.
          additionalProperties: true
          required: []
          properties: {}
      imageReference:
        description: https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#imagereference
        type: object
        additionalProperties: true
        required: []
        properties:
          id:
            type: string
  networkProfile:
    title: Network Profile
    type: object
    description: |
      Container object for network interfaces for the VM
      See here: https://docs.microsoft.com/en-us/rest/api/compute/virtualmachines/createorupdate#networkprofile
    additionalProperties: true
    required:
      - networkInterfaces
    properties:
      networkInterfaces:
        title: Network Interfaces
        type: array
        uniqueItems: false
        items:
          title: Network Interface Reference
          type: object
          additionalProperties: true
          required: []
          properties:
            id:
              type: string
            primary:
              type: boolean
