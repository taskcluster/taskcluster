{
  "serviceName": "auth",
  "$schema": "/schemas/common/logs-reference-v0.json#",
  "types": [
    {
      "type": "monitor.timer",
      "version": 1,
      "description": "The most basic timer.",
      "fields": {
        "key": "A key that should be unique to the logger prefix.",
        "duration": "The duration in ms of whatever was timed."
      }
    },
    {
      "type": "monitor.timedHandler",
      "version": 1,
      "description": "A basic timer applied to a function.",
      "fields": {
        "name": "The name of the handler.",
        "status": "Whether or not the handler resolved succesfully.",
        "duration": "The duration in ms of the function."
      }
    },
    {
      "type": "monitor.apiMethod",
      "version": 1,
      "description": "A timer and audit for express endpoints.\nYou can combine this with auth audit logs to get\na complete picture of what was authorized when.\n\nHere, anything that is not public should have authenticated\nand if it authenticated, we will tell the clientId here. Given\nthat, it is not necessarily true that the endpoint was\n_authorized_. You can tell that by the statusCode.",
      "fields": {
        "name": "The name of the endpoint.",
        "resource": "The path of the http request. Should match the one in auth audit log.",
        "method": "The http method of the request. Should match the one in auth audit log.",
        "statusCode": "The http status code that the endpoint resolved with.",
        "duration": "The duration in ms of the endpoint.",
        "public": "Will be true if the endpoint requires no scopes.",
        "hasAuthed": "Will be true if the request had req.authorize() called on it.",
        "clientId": "The clientId that made the request if there was one."
      }
    },
    {
      "type": "monitor.aws",
      "version": 1,
      "description": "A timer for calls to aws services.",
      "fields": {
        "service": "The name of the aws service being accessed.",
        "operation": "The specific operation of this call.",
        "duration": "How long it took to resolve the request in ms.",
        "region": "The AWS region this service is in."
      }
    },
    {
      "type": "monitor.resources",
      "version": 1,
      "description": "Metrics of a node process.",
      "fields": {
        "lastCpuUsage": "The output of node's process.cpuUsage",
        "lastMemoryUsage": "The output of node's process.memoryUsage"
      }
    },
    {
      "type": "monitor.measure",
      "version": 1,
      "description": "A simple measurement. The reported values are expected to have statistics calculated over them.",
      "fields": {
        "key": "An arbitrary key.",
        "val": "A number that should be calculated over in a time span."
      }
    },
    {
      "type": "monitor.count",
      "version": 1,
      "description": "A simple count. The reported values should be summed up in a time span.",
      "fields": {
        "key": "An arbitrary key.",
        "val": "A number that should be summed over a time span."
      }
    },
    {
      "type": "monitor.error",
      "version": 1,
      "description": "A specifically formatted error report. Will have at least the following but can contain more.",
      "fields": {
        "name": "The name of the error.",
        "message": "Whatever message the error contained.",
        "stack": "A nodejs stack trace."
      }
    },
    {
      "type": "monitor.timekeeper",
      "version": 1,
      "description": "A simple timekeeper for measuring arbitrary time spans.",
      "fields": {
        "key": "A key that should be unique to the logger prefix.",
        "duration": "The duration in ms of whatever was timed."
      }
    },
    {
      "type": "monitor.generic",
      "version": 1,
      "description": "An internal type for logging simple messages. No required fields.",
      "fields": {}
    },
    {
      "type": "monitor.loggingError",
      "version": 1,
      "description": "An internal type for reporting malformed logging calls.",
      "fields": {}
    },
    {
      "type": "signature-validation",
      "version": 1,
      "description": "Records results of authenticating a client.\nThis contains the verified hawk headers that were sent\nto auth in addition to info about the client.\n\nIn these fields, there are two requests that might be\nmentioned. The first is the original request from a\nclient to a service and the second is the request from\nthe service to auth itself.",
      "fields": {
        "clientId": "The clientId that was authenticated.",
        "expires": "After this time the authentication is no longer valid.",
        "scopes": "All scopes that this client has available.",
        "status": "Whether or not the authentication was successful.",
        "scheme": "Currently always `hawk`.",
        "message": "A reason for failure if failed. Otherwise empty.",
        "host": "The hostname of the authorizer of the request.",
        "hash": "The hash of the request payload of the original request, if there was one.",
        "port": "The port of the original request.",
        "resource": "The path of the original request",
        "method": "HTTP method of the original request.",
        "sourceIp": "The ip address of the original request."
      }
    }
  ]
}