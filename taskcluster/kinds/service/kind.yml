---
loader: src.loader:services_and_libraries_loader

transforms:
  - src.transforms:add_task_env
  - taskgraph.transforms.run
  - taskgraph.transforms.task

workspace: services

task-defaults:
  worker-type: ubuntu-24-04
  run:
    using: bare
  scopes:
    - secrets:get:project/taskcluster/testing/azure
    - secrets:get:project/taskcluster/testing/taskcluster-*
  worker:
    docker-image: {in-tree: ci}
    taskcluster-proxy: true
    artifacts:
      - name: public
        path: /taskcluster/artifacts
        type: directory
    max-run-time: 600
    env:
      # temporary for https://github.com/taskcluster/taskcluster/issues/3665
      DEBUG: 'base:app'
