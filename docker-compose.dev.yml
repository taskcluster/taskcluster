x-autogenerated: This file is autogenerated
services:
  pg_init_db:
    volumes:
      - ./db:/app/db
  ui:
    image: taskcluster/ui
    build:
      context: ./ui
      dockerfile: Dockerfile
    environment:
      TASKCLUSTER_ROOT_URL: http://taskcluster
    command: start:docker
    volumes:
      - ./generated:/app/generated
      - .all-contributorsrc:/app/.all-contributorsrc
      - ./ui:/app/ui
  generic-worker-standalone:
    image: taskcluster/generic-worker:v47.1.2
    networks:
      - local
    build:
      context: .
      dockerfile: generic-worker.Dockerfile
  generic-worker-static:
    image: taskcluster/generic-worker:v47.1.2
    networks:
      - local
    build:
      context: .
      dockerfile: generic-worker.Dockerfile
  auth-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/auth:/app/services/auth
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/auth services/auth/src/main server"
  auth-cron-purgeExpiredClients:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/auth:/app/services/auth
    profiles:
      - cron
      - auth
      - auth-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/auth services/auth/src/main purge-expired-clients"
  built-in-workers-server:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/built-in-workers:/app/services/built-in-workers
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/built-in-workers services/built-in-workers/src/main.js server"
  github-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/github:/app/services/github
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/github services/github/src/main server"
  github-background-worker:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/github:/app/services/github
    profiles:
      - background
      - github
      - github-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/github services/github/src/main worker"
  github-cron-sync:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/github:/app/services/github
    profiles:
      - cron
      - github
      - github-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/github services/github/src/main syncInstallations"
  hooks-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/hooks:/app/services/hooks
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/hooks services/hooks/src/main.js server"
  hooks-background-scheduler:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/hooks:/app/services/hooks
    profiles:
      - background
      - hooks
      - hooks-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/hooks services/hooks/src/main.js scheduler"
  hooks-background-listeners:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/hooks:/app/services/hooks
    profiles:
      - background
      - hooks
      - hooks-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/hooks services/hooks/src/main.js listeners"
  hooks-cron-expires:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/hooks:/app/services/hooks
    profiles:
      - cron
      - hooks
      - hooks-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/hooks services/hooks/src/main.js expires"
  index-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/index:/app/services/index
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/index services/index/src/main server"
  index-background-handlers:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/index:/app/services/index
    profiles:
      - background
      - index
      - index-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/index services/index/src/main handlers"
  index-cron-expire:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/index:/app/services/index
    profiles:
      - cron
      - index
      - index-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/index services/index/src/main expire"
  notify-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/notify:/app/services/notify
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/notify services/notify/src/main server"
  notify-background-handler:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/notify:/app/services/notify
    profiles:
      - background
      - notify
      - notify-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/notify services/notify/src/main handler"
  object-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/object:/app/services/object
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/object services/object/src/main.js server"
  object-cron-expire:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/object:/app/services/object
    profiles:
      - cron
      - object
      - object-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/object services/object/src/main expire"
  purge-cache-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/purge-cache:/app/services/purge-cache
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/purge-cache services/purge-cache/src/main server"
  purge-cache-cron-expireCachePurges:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/purge-cache:/app/services/purge-cache
    profiles:
      - cron
      - purge-cache
      - purge-cache-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/purge-cache services/purge-cache/src/main expire-cache-purges"
  queue-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main server"
  queue-background-claimResolver:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - background
      - queue
      - queue-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main claim-resolver"
  queue-background-deadlineResolver:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - background
      - queue
      - queue-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main deadline-resolver"
  queue-background-dependencyResolver:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - background
      - queue
      - queue-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main dependency-resolver"
  queue-cron-expireArtifacts:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-artifacts"
  queue-cron-expireTask:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-tasks"
  queue-cron-expireTaskGroups:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-task-groups"
  queue-cron-expireTaskDependency:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-task-dependency"
  queue-cron-expireQueueMessages:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-queue-messages"
  queue-cron-expireWorkerInfo:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/queue:/app/services/queue
    profiles:
      - cron
      - queue
      - queue-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/queue services/queue/src/main expire-worker-info"
  secrets-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/secrets:/app/services/secrets
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/secrets services/secrets/src/main.js server"
  secrets-cron-expire:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/secrets:/app/services/secrets
    profiles:
      - cron
      - secrets
      - secrets-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/secrets services/secrets/src/main.js expire"
  web-server-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/web-server:/app/services/web-server
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/web-server services/web-server/src/main.js server"
  web-server-cron-scanner:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/web-server:/app/services/web-server
    profiles:
      - cron
      - web-server
      - web-server-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/web-server services/web-server/src/main.js scanner"
  web-server-cron-cleanup-expire-auth-codes:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/web-server:/app/services/web-server
    profiles:
      - cron
      - web-server
      - web-server-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/web-server services/web-server/src/main.js cleanup-expire-auth-codes"
  web-server-cron-cleanup-expire-access-tokens:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/web-server:/app/services/web-server
    profiles:
      - cron
      - web-server
      - web-server-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/web-server services/web-server/src/main.js cleanup-expire-access-tokens"
  worker-manager-web:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js server"
  worker-manager-background-provisioner:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - background
      - worker-manager
      - worker-manager-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js runProvisioner"
  worker-manager-background-workerscanner:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - background
      - worker-manager
      - worker-manager-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js workerScanner"
  worker-manager-background-workerscanner-azure:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - background
      - worker-manager
      - worker-manager-background
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js workerScannerAzure"
  worker-manager-cron-expire-workers:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - cron
      - worker-manager
      - worker-manager-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js expireWorkers"
  worker-manager-cron-expire-worker-pools:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - cron
      - worker-manager
      - worker-manager-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js expireWorkerPools"
  worker-manager-cron-expire-errors:
    image: taskcluster/taskcluster:v47.1.2-devel
    environment:
      NODE_ENV: development
      DEBUG: '*'
    volumes:
      - ./db:/app/db
      - ./generated:/app/generated
      - ./clients:/app/clients
      - ./libraries:/app/libraries
      - ./services/worker-manager:/app/services/worker-manager
    profiles:
      - cron
      - worker-manager
      - worker-manager-cron
    command: ''
    entrypoint: /bin/sh -c "nodemon --delay 3 --watch services --watch libraries --watch services/worker-manager services/worker-manager/src/main.js expireErrors"
