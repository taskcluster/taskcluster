{
  "name": "azure",
  "author": {
    "name": "Microsoft Corporation"
  },
  "contributors": [
    {
      "name": "Block, Glenn",
      "email": "gblock@microsoft.com"
    },
    {
      "name": "Cowlishaw, Mark",
      "email": "markcowl@microsoft.com"
    },
    {
      "name": "Dejardin, Louis",
      "email": "loudej@microsoft.com"
    },
    {
      "name": "Georgiev, Yavor",
      "email": "yavorg@microsoft.com"
    },
    {
      "name": "Janczuk, Tomasz",
      "email": "tjanczuk@microsoft.com"
    },
    {
      "name": "Rodrigues, Andre",
      "email": "andrerod@microsoft.com"
    },
    {
      "name": "Tavares, Chris",
      "email": "ctavares@microsoft.com"
    }
  ],
  "version": "0.7.19",
  "description": "Windows Azure Client Library for node",
  "tags": [
    "azure",
    "sdk"
  ],
  "keywords": [
    "node",
    "azure"
  ],
  "main": "./lib/azure.js",
  "engines": {
    "node": ">= 0.6.15"
  },
  "licenses": [
    {
      "type": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0"
    }
  ],
  "dependencies": {
    "xml2js": "0.2.7",
    "xmlbuilder": "0.4.3",
    "mime": ">= 1.2.4",
    "dateformat": "1.0.2-1.2.3",
    "underscore": "~1.4.0",
    "node-uuid": "~1.2.0",
    "tunnel": "~0.0.2",
    "request": "2.27.0",
    "validator": "2.1.0",
    "wns": "~0.5.3",
    "mpns": "~2.0.0",
    "envconf": "~0.0.4",
    "duplexer": "~0.1.1",
    "through": "~2.3.4"
  },
  "devDependencies": {
    "mocha": "1.16.0",
    "jshint": ">= 2.1.4",
    "sinon": "*",
    "should": "1.2.x",
    "nock": "*",
    "grunt": "~0.4.1",
    "grunt-jsdoc": "~0.4.0",
    "grunt-devserver": "~0.4.1",
    "grunt-github-pages": "0.0.3"
  },
  "homepage": "http://github.com/WindowsAzure/azure-sdk-for-node",
  "repository": {
    "type": "git",
    "url": "git@github.com:WindowsAzure/azure-sdk-for-node.git"
  },
  "bugs": {
    "url": "http://github.com/WindowsAzure/azure-sdk-for-node/issues"
  },
  "scripts": {
    "test": "npm -s run-script jshint && npm -s run-script unit",
    "unit": "node scripts/unit.js testlist.txt",
    "update": "node scripts/update.js",
    "jshint": "jshint lib --reporter=jslint",
    "ci": "node scripts/unit.js testlist.txt",
    "coverage": "node scripts/unit.js testlist.txt -coverage > coverage.html"
  },
  "readme": "# Windows Azure SDK for Node.js \n\n[![NPM version](https://badge.fury.io/js/azure.png)](http://badge.fury.io/js/azure) [![Build Status](https://travis-ci.org/WindowsAzure/azure-sdk-for-node.png?branch=master)](https://travis-ci.org/WindowsAzure/azure-sdk-for-node)\n\nThis project provides a Node.js package that makes it easy to access Windows Azure Services like Table Storage and Service Bus. \n\n## Library Features\n\n* Tables\n    * create and delete tables\n    * create, query, insert, update, merge, and delete entities\n* Blobs\n    * create, list, and delete containers, work with container metadata and permissions, list blobs in container\n    * create block and page blobs (from a stream, a file, or a string), work with blob blocks and pages, delete blobs\n    * work with blob properties, metadata, leases, snapshot a blob\n* HD Insight\n    * create, list and delete HDInsight clusters\n* Storage Queues\n    * create, list, and delete queues, and work with queue metadata\n    * create, get, peek, update, delete messages\n* Service Bus\n    * Queues: create, list and delete queues; create, list, and delete subscriptions; send, receive, unlock and delete messages\n    * Topics: create, list, and delete topics; create, list, and delete rules\n    * Notification hubs: create hubs, register for messages, send messages\n* Azure SQL Database\n    * create, list and delete Azure SQL Database servers, databases and firewall rules\n* Service Runtime\n    * discover addresses and ports for the endpoints of other role instances in your service\n    * get configuration settings and access local resources\n    * get role instance information for current role and other role instances\n    * query and set the status of the current role\n\n## Getting Started\n### Download Source Code\n\nTo get the source code of the SDK via **git** just type:\n\n    git clone https://github.com/WindowsAzure/azure-sdk-for-node.git\n    cd ./azure-sdk-for-node\n\n### Install the npm package\n\nYou can install the azure npm package directly.\n\n    npm install azure\n\nYou can use these packages against the cloud Windows Azure Services, or against\nthe local Storage Emulator (with the exception of Service Bus features).\n\n1. To use the cloud services, you need to first create an account with Windows Azure. To use the storage services, you need to set the AZURE_STORAGE_ACCOUNT and the AZURE_STORAGE_ACCESS_KEY environment variables to the storage account name and primary access key you obtain from the Azure Portal. To use Service Bus, you need to set the AZURE_SERVICEBUS_NAMESPACE and the AZURE_SERVICEBUS_ACCESS_KEY environment variables to the service bus namespace and the default key you obtain from the Azure Portal.\n2. To use the Storage Emulator, make sure the latest version of the Windows Azure SDK is installed on the machine, and set the EMULATED environment variable to any value (\"true\", \"1\", etc.)\n\n## Usage\n\nFor a detailed usage of this module, please check:\nhttp://dl.windowsazure.com/nodedocs/\n\n### Table Storage\n\nTo ensure a table exists, call **createTableIfNotExists**:\n\n```Javascript\nvar tableService = azure.createTableService();\ntableService.createTableIfNotExists('tasktable', function(error){\n    if(!error){\n        // Table exists\n    }\n});\n```\nA new entity can be added by calling **insertEntity**:\n\n```Javascript\nvar tableService = azure.createTableService(),\n    task1 = {\n        PartitionKey : 'tasksSeattle',\n        RowKey: '1',\n        Description: 'Take out the trash',\n        DueDate: new Date(2011, 12, 14, 12) \n    };\ntableService.insertEntity('tasktable', task1, function(error){ \n    if(!error){\n        // Entity inserted\n    }\n});\n```\n\nThe method **queryEntity** can then be used to fetch the entity that was just inserted:\n\n```Javascript\nvar tableService = azure.createTableService();\ntableService.queryEntity('tasktable', 'tasksSeattle', '1', function(error, serverEntity){\n    if(!error){\n        // Entity available in serverEntity variable\n    }\n});\n```\n\n### Blob Storage\n\nThe **createContainerIfNotExists** method can be used to create a \ncontainer in which to store a blob:\n\n```Javascript\nvar blobService = azure.createBlobService();\nblobService.createContainerIfNotExists('taskcontainer', {publicAccessLevel : 'blob'}, function(error){\n    if(!error){\n        // Container exists and is public\n    }\n});\n```\n\nTo upload a file (assuming it is called task1-upload.txt and it is placed in the same folder as the script below), the method **createBlob** can be used. This method will return a writable stream which can be writen to, for instance, through piping:\n\n```Javascript\nvar blobService = azure.createBlobService();\n\nfs.createReadStream('task1-upload.txt').pipe(blobService.createBlob('taskcontainer', 'task1', azure.Constants.BlobConstants.BlobTypes.BLOCK));\n```\n\nTo download the blob and write it to the file system, a similar **getBlob** method can be used:\n\n```Javascript\nvar blobService = azure.createBlobService();\n\nblobService.getBlob('taskcontainer', 'task1').pipe(fs.createWriteStream('task1-download.txt'));\n```\n\nTo create a SAS URL you can use the **getBlobUrl** method. Additionally you can use the **date** helper functions to easily create a SAS that expires at some point relative to the current time.\n\n```Javascript\nvar blobService = azure.createBlobService();\n\n//create a SAS that expires in an hour\nvar sharedAccessPolicy = { \n    AccessPolicy: {\n        Expiry: azure.date.minutesFromNow(60);\n    }\n};\n\nvar sasUrl = blobService.getBlobUrl(containerName, blobName, sharedAccessPolicy);\n```\n\n### Storage Queues\n\nThe **createQueueIfNotExists** method can be used to ensure a queue exists:\n\n```Javascript\nvar queueService = azure.createQueueService();\nqueueService.createQueueIfNotExists('taskqueue', function(error){\n    if(!error){\n        // Queue exists\n    }\n});\n```\n\nThe **createMessage** method can then be called to insert the message into the queue:\n\n```Javascript\nvar queueService = azure.createQueueService();\nqueueService.createMessage('taskqueue', 'Hello world!', function(error){\n    if(!error){\n        // Message inserted\n    }\n});\n```\n\nIt is then possible to call the **getMessage** method, process the message and then call **deleteMessage** inside the callback. This two-step process ensures messages don't get lost when they are removed from the queue.\n\n```Javascript\nvar queueService = azure.createQueueService(),\n    queueName = 'taskqueue';\nqueueService.getMessages(queueName, function(error, serverMessages){\n    if(!error){\n        // Process the message in less than 30 seconds, the message\n        // text is available in serverMessages[0].messagetext \n\n        queueService.deleteMessage(queueName, serverMessages[0].messageid, serverMessages[0].popreceipt, function(error){\n            if(!error){\n                // Message deleted\n            }\n        });\n    }\n});\n```\n\n### Service Bus Queues\n\nService Bus Queues are an alternative to Storage Queues that might be useful in scenarios where more advanced messaging features are needed (larger message sizes, message ordering, single-operaiton destructive reads, scheduled delivery) using push-style delivery (using long polling).\n\nThe **createQueueIfNotExists** method can be used to ensure a queue exists:\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService();\nserviceBusService.createQueueIfNotExists('taskqueue', function(error){\n    if(!error){\n        // Queue exists\n    }\n});\n```\n\nThe **sendQueueMessage** method can then be called to insert the message into the queue:\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService();\nserviceBusService.sendQueueMessage('taskqueue', 'Hello world!', function(\n    if(!error){\n        // Message sent\n     }\n});\n```\n\nIt is then possible to call the **receiveQueueMessage** method to dequeue the message.\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService();\nserviceBusService.receiveQueueMessage('taskqueue', function(error, serverMessage){\n    if(!error){\n        // Process the message\n    }\n});\n```\n\n### Service Bus Topics\n\nService Bus topics are an abstraction on top of Service Bus Queues that make pub/sub scenarios easy to implement.\n\nThe **createTopicIfNotExists** method can be used to create a server-side topic:\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService();\nserviceBusService.createTopicIfNotExists('taskdiscussion', function(error){\n    if(!error){\n        // Topic exists\n    }\n});\n```\n\nThe **sendTopicMessage** method can be used to send a message to a topic:\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService();\nserviceBusService.sendTopicMessage('taskdiscussion', 'Hello world!', function(error){\n    if(!error){\n        // Message sent\n    }\n});\n```\n\nA client can then create a subscription and start consuming messages by calling the **createSubscription** method followed by the **receiveSubscriptionMessage** method. Please note that any messages sent before the subscription is created will not be received.\n\n```Javascript\nvar serviceBusService = azure.createServiceBusService(),\n    topic = 'taskdiscussion',\n    subscription = 'client1';\n\nserviceBusService.createSubscription(topic, subscription, function(error1){\n    if(!error1){\n        // Subscription created\n\n        serviceBusService.receiveSubscriptionMessage(topic, subscription, function(error2, serverMessage){\n            if(!error2){\n                // Process message\n            }\n        });\n     }\n});\n```\n\n\n### Notification Hubs\n\nNotification hubs allow you to send notifications to WNS, APNS, and GCM receivers.\n\nTo create a notification hub, use the method **createNotificationHub**.\n\n```JavaScript\nvar serviceBusService = azure.createServiceBusService();\n\nserviceBusService.createNotificationHub('hubName', function (err) {\n    if (!err) {\n        // Notification hub created successfully\n    }\n});\n```\n\nTo send messages to the notification hub use the methods of the **wns**, **apns**, or **gcm** objects. For a full reference on WNS method templates, check http://msdn.microsoft.com/en-us/library/windows/apps/hh779725.aspx.\n\n```JavaScript\nvar notificationHubService = azure.createNotificationHubService('hubName');\n\nnotificationHubService.wns.sendTileSquarePeekImageAndText01(\n    null,\n    {\n        image1src: 'http://foobar.com/dog.jpg',\n        image1alt: 'A dog',\n        text1: 'This is a dog',\n        text2: 'The dog is nice',\n        text3: 'The dog bites',\n        text4: 'Beware of dog'\n    },\n    function (error) {\n        if (!error) {\n            // message sent successfully\n        }\n    });\n\nnotificationHubService.apns.send(\n    null,\n    {\n        alert: 'This is my toast message for iOS!',\n        expiry: expiryDate\n    },\n    function (error) {\n        if (!error) {\n            // message sent successfully\n        }\n    });\n\nnotificationHubService.gcm.send(\n    null,\n    {\n        data: { message: 'Here is a message' }\n    },\n    function (error) {\n        if (!error) {\n            //message send successfully\n        }\n    });\n```\n\n### Azure SQL Database\n\nThe Azure SQL Database functions allow you to manage Azure SQL servers, databases and firewall rules.\n\n#### Servers\nYou can add, delete and list SQL Server instances\n\n```Javascript\nvar authentication={keyvalue:'...', certvalue:'...' };\nvar sqlMgmt = new azure.createSqlManagementService(subscriptionId, authentication);\n\n//create a new server\n//admin, password, location, callback\nsqlMgmt.createServer('sqladmin', 'Pa$$w0rd', 'West US', function(error, serverName) {\n    console.log('created server ' + serverName);\n});\n\n//list out servers\nsqlMgmt.listServers(function(error, servers) {\n    console.log('servers\\n' + servers);\n});\n\n```\n\n#### Firewall rules\nYou can list, create and delete firewall rules\n\n```Javascript\nvar authentication={keyvalue:'...', certvalue:'...'};\nvar sqlMgmt = new azure.createSqlManagementService(subscriptionId, authentication);\n\n//create a new rule\n//server, rule name, start ip, end ip, callback\nsqlMgmt.createServerFirewallRule(serverName, 'myrule', '192.168.100.0', '192.168.100.255',\n    function(error, rule) {\n        console.log('Rule created:\\n' + rule);\n    }\n);\n\n//list rules\nsqlMgmt.listServerFirewallRules(serverName, function(error, rules) {\n    console.log('Rules:\\n:' + rules);\n});\n\n```\n\n#### Databases\nYou can list, create and delete databases\n\n```Javascript\nvar sqlService = new azure.createSqlService(serverName, 'sqlAdmin', 'Pa$$w0rd');\n\n//create a new database\n//db name, callback\nsqlServer.createServerDatabase('mydb', function(error, db) {\n  console.log('DB Created:\\n' + db);\n});\n\n//list databases\nsqlServer.listServerDatabases(function(error, dbs) {\n  console.log('Databases:\\n' + dbs);\n});\n\n```\n\n### Service Runtime\n\nThe Service Runtime allows you to interact with the machine environment where the current role is running. Please note that these commands will only work if your code is running in a worker role inside the Azure emulator or in the cloud.\n\nThe **isAvailable** method lets you determine whether the service runtime endpoint is running on the local machine.  It is good practice to enclose any code that \nuses service runtime in the isAvailable callback.\n\n```JavaScript\nazure.RoleEnvironment.isAvailable(function(error, available) {\n    if (available) {\n        // Place your calls to service runtime here\n    }\n});\n```\n\nThe **getConfigurationSettings** method lets you obtain values from the role's .cscfg file.\n\n```Javascript\nazure.RoleEnvironment.getConfigurationSettings(function(error, settings) {\n    if (!error) {\n        // You can get the value of setting \"setting1\" via settings['setting1']\n    }        \n});\n```\n\nThe **getLocalResources** method lets you find the path to defined local storage resources for the current role.  For example, the DiagnosticStore \nresource which is defined for every role provides a location for runtime diagnostics and logs.\n\n```Javascript\nazure.RoleEnvironment.getLocalResources(function(error, resources) {\n    if(!error){\n        // You can get the path to the role's diagnostics store via \n        // resources['DiagnosticStore']['path']\n    }\n});\n```\n\nThe **getCurrentRoleInstance** method lets you obtain information about endpoints defined for the current role instance:\n\n```JavaScript\nazure.RoleEnvironment.getCurrentRoleInstance(function(error, instance) {\n    if (!error && instance['endpoints']) {\n        // You can get information about \"endpoint1\" such as its address and port via\n        // instance['endpoints']['endpoint1']['address'] and instance['endpoints']['endpoint1']['port']\n    }\n});\n```\n\nThe **getRoles** method lets you obtain information about endpoints in role instances running on other machines:\n\n```Javascript\nazure.RoleEnvironment.getRoles(function(error, roles) {\n    if(!error){\n        // You can get information about \"instance1\" of \"role1\" via roles['role1']['instance1']\n    } \n});\n```\n\n**For more examples please see the [Windows Azure Node.js Developer Center](http://www.windowsazure.com/en-us/develop/nodejs)**\n\n## Need Help?\n\nBe sure to check out the Windows Azure [Developer Forums on Stack Overflow](http://go.microsoft.com/fwlink/?LinkId=234489) if you have trouble with the provided code.\n\n## Contribute Code or Provide Feedback\n\nIf you would like to become an active contributor to this project please follow the instructions provided in [Windows Azure Projects Contribution Guidelines](http://windowsazure.github.com/guidelines.html).\n\nIf you encounter any bugs with the library please file an issue in the [Issues](https://github.com/WindowsAzure/azure-sdk-for-node/issues) section of the project.\n\n## Learn More\n\nFor documentation on how to host Node.js applications on Windows Azure, please see the [Windows Azure Node.js Developer Center](http://www.windowsazure.com/en-us/develop/nodejs/).\n\nFor documentation on the Azure cross platform CLI tool for Mac and Linux, please see our readme [here] (http://github.com/windowsazure/azure-sdk-tools-xplat)\n\nCheck out our new IRC channel on freenode, node-azure.\n",
  "readmeFilename": "README.md",
  "_id": "azure@0.7.19",
  "_from": "azure@0.7.19"
}
